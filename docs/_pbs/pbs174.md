---
title: Working with Submodules
instalment: 174
miniseries: Git
creators: [bart, allison]
date: 2024-12-07
---
This is the third of three instalments exploring git's support for nested repositories through so-called *Git submodules*. In [the first instalment](./pbs172) we focued purely on the theory and the motivations, then, in the second we got practical, learning how to use the `git module`  command to nest one repository within another. We used a simplified but realistic scenario of a small software company to explore some common actions developers are likely to need to do with Git submodules. Those actions were all realistic, but they were all very basic, and involved passively consuming content from the remote repository. We'll start this instalment with a scenario where we push code changes from our submodule back to the remote repository. Then, we'll use a second scenario to explore how Git submodules handle branching.

## Matching Podcast Episode

TO DO

## A (Reminder) Note on Default Git Security Settings

In the previous instalment we explained that for security reasons, Git prevents the use of file path URLs in Git commands triggered by other Git commands by default. Because our examples simulate multiple computers with multiple folders, we need to use file path URLs, so, some of our example commands need to use the `-c` option to make a single-command exception to this security default. Specifically, any Git command we use that triggers other Git commands needs to include the following option:

```sh
-c protocol.file.allow=always
```

If we forget to do this we'll get errors like:

```text
fatal: transport 'file' not allowed
```

Again, just a reminder that in the real world you're most likely to be working with genuinely remote repositories over SSH or HTTPS, so you're unlikely to encounter this issue.

## Reminder — Our Overall Scenario,  a Small Web App Business

TO CONDENSE

To explore Git submodules we're going to pretend to be a fledgeling business that builds web apps, all of which share the company's branding.

To keep things consistent across current and future apps, the branding is versioned in its own private Git repository named `pbscorp-brand`. Each web app has its own repo, with names like `pbscorp-app1`.  The app repos link the brand repo in as a git submodule.

TO UPDATE FROM HERE TO END OF SECTION 

To play along, start by downloading the instalment ZIP file, extracting it, and opening a terminal in the extracted folder, and executing the initialisation script `initPBS173Demo.sh` with the commands:

```sh
chmod +x *.sh; ./initPBS173Demo.sh
```

This script does the following:

1. Creates parent folders to simulate Git repositories on different computers: 
   1. `remote-repos` to represent the company's GIT server
   2. `pc-app1Dev` to represent the PC of a newly hired developer who's just been assigned to app 1
   3. `pc-app2Dev` to represent the PC of a developer tasked with creating the brand-new app 2
   4. `pc-brandDesigner` to represent the PC of a designer tasked with maintaining the brand
2. Expands the bundled repos `pbscorp-brand.bundle` and `pbscorp-app1.bundle` into the repositories `pbscorp-brand` & `pbscorp-app1` in the `remote-repos` folder

## Scenario 4 — Pushing Submodule changes (Extending the Brand from App 2)

Up to this point we have used submodules to import content and changes into our repo, but submodules allow a fully two-way interaction like any other Git repo does.

To prove this point, let's play the role of the developer of App 2, and edit the brand which we've consumed as a submodule, and then push that change up to the remote brand repository.

TO DO

## Scenario 5 — Branching with Submodules (Testing a Brand Change)

So far, we've worked on a single branch in all repositories, but in this final scenario, it's time to change that. We're going to perform as controlled rollout of a new brand using staging branches in the brand repository as well as the repositories for App 1 & App 2 which consume the brand repository as a submodule.

TO DO

## Final Thoughts

TO DO
