# PBS 155 of X — Introducing JSON Processing from the Shell with `jq`

JSON is a commonly used data format that has its origins in the JavaScript syntax. We first met it all the way back in [instalment 17](./pbs17), and we've bumped into it from time to time since then.

[JSON](https://en.wikipedia.org/wiki/JSON) is a very powerful means of expressing even complex data, but it can be tricky to interact with from the command line or shell scripts because it doesn't lend itself to being queried by simple text-processing commands like `grep`. To work with JSON in a shell, you need a terminal command that truly understands JSON. Presumably because JSON is a relatively new format, at least compared to `sh`, `bash`, or even `zsh`, support for it hasn't come a standard part of our shell environment yet. Thankfully there is a free and open source third-party command available — `jq` (details on [Wikipedia](https://en.wikipedia.org/wiki/Jq_(programming_language)) or [the project's home page](https://jqlang.github.io/jq/)).

Don't let the shortness of its name trick you into thinking `jq` us a simple command, it really isn't — it's extremely powerful, and you need to learn an entire new language to master it! In may ways, `jq` reminds me of regular expressions — it's syntax is powerful, dense, and looks like a cat ran across your keyboard at first glance! However, when you learn the language, you can express a lot with very few characters!



We're going to spend a few instalments getting to know both the `jq` terminal command and the `jq` language, but we're not going dive into each and every feature it offers, instead, we're going to focus our efforts on three key abilities `jq` provides:

1. Pretty-printing JSON, helping us mere humans to read it
2. Extracting information from JSON
3. Transforming JSON data from one form to anther

We'll explore these features as they relate to three common use cases:

1. APIs, particularly web services, that return data in JSON format
2. Reading information from simple JSON files like config files
3. Querying and processing large JSON-formatted data sets

## Podcast Episode

TO DO

## Prologue — A Very Quick JSON Refresher

This instalment assumes fluency in JSON. If you've never met JSON before, don't worry, it's quite an intuitive format, and there are lots of online resources available to help you learn, for example:

* I wrote a simple intro to JSON a few years ago — [www.bartbusschots.ie/…](https://www.bartbusschots.ie/s/2015/08/08/json-a-quick-intro/)
* A good tutorial from FreeCodeCamp — [www.freecodecamp.org/…](https://www.freecodecamp.org/news/what-is-json-a-json-file-example/)

Having said that, here's a quick reminder of the basics!

Everything in JSON is one of six types:

1. A number, e.g. `42` or `3.1415`
2. A string, e.g. `"A boring string"`
3. A boolean, i.e. `true` or `false`
4. The null value, i.e. `null`
5. An array of zero or more values, e.g. `[true, 42, "some string"]`
6. A dictionary (AKA object) of key-value pairs, e.g. `{"key1": "value 1", "another_key": 42}`

Both arrays and dictionaries can be nested, allowing complex pieces of information to be represented, e.g., the details of a Nobel prize:

```json
{
  "year": "2023",
  "category": "chemistry",
  "laureates": [
    {
      "id": "1029",
      "firstname": "Moungi",
      "surname": "Bawendi",
      "motivation": "\"for the discovery and synthesis of quantum dots\"",
      "share": "3"
    },
    {
      "id": "1030",
      "firstname": "Louis",
      "surname": "Brus",
      "motivation": "\"for the discovery and synthesis of quantum dots\"",
      "share": "3"
    },
    {
      "id": "1031",
      "firstname": "Aleksey",
      "surname": "Yekimov",
      "motivation": "\"for the discovery and synthesis of quantum dots\"",
      "share": "3"
    }
  ]
}
```

## Installing `jq ` (and `curl`)

Because the `jq` command doesn't ship as standard with the mainstream command shells, you'll need to install it. That's generally easiest on Linux where it's available from most distro's standard package manager, e.g. `sudo yum install jq` or `sudo apt-get install jq`. Things are a little more complicated on Windows and the Mac.

The most common advice for Windows users is to use the [Chocolatey package manager](https://chocolatey.org). Once you have that installed you can install `jq` from a PowerShell terminal running as administrator with the command `choco install jq -y`.

Similarly, the most common advice for Mac users is to use the [Homebrew package manager](https://brew.sh). Once Homebrew is installed, you can install `jq` with the command `brew install jq`.

Because JSON is returned by so many web APIs, our examples will use the `curl` command to make web requests from the command line. The `curl` command ships as standard on the Mac, as well as on many Linux distributions (or it's available from the standard package manager). Windows users can get `curl` from Chocolately with the command `choco install curl -y`.

## Using the `jq` Command

LEFT OFF HERE!!!

```bash
curl https://freeipapi.com/api/json/1.1.1.1 | jq .
curl -q 'http://wttr.in/?format=j1' | jq '.current_condition[0].uvIndex'
```

